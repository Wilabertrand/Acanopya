<div class="container py-4">
<%= render 'shared/tab' %>
  <%= simple_form_for :search, url: trip_restaurants_path, method: 'GET', html: { class: 'form-inline' } do |f| %>
    <%= f.input :price_max, placeholder: 'prix maximum', label: false, input_html: { value: @price_max } %>
    <%= f.input :category, label: false, collection: Restaurant::CATEGORIES, prompt: 'catégorie', selected: @category, include_blank: 'Tous' %>
    <%= f.submit "Search", class: "btn btn-primary" %>
  <% end %>
<div class="container pt-4 pb-1">
  <div class="content"> 
    <div class="cards">
      <% @restaurants.each do |restaurant| %>
        <%= link_to trip_restaurant_path(trip_id: @trip.id, id: restaurant.id) do %>
          <div class="card-trip">  
            <%= cl_image_tag restaurant.photos.first.key %>
            <div class="card-trip-infos">
              <div>
                <p><%= restaurant.address %></p>
                <h2 class="pb-2 mb-2 border-bottom"><%= restaurant.name %></h2>
                <p><%= restaurant.category %></p>
              </div>
              <h2 class="card-trip-pricing"><%= restaurant.price %>€</h2>
              <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-trip-user avatar-bordered"/>
            </div>
          </div> 
        <% end %> 
      <% end %>
    </div>
    <div id="trip-box" style="width: 300px; height: 100vh;">
      <ul class="list-inline t-tabs-underlined">
        <li>
          <%= link_to "Carte", trip_restaurants_path(@trip.id), class: "t-tab-underlined active" %>
        </li>
        <li>
          <%= link_to "Voyage", trip_restaurants_path(@trip.id), class: "t-tab-underlined" %>
        </li>
      </ul>
      <div id="map"
        style="width: 300px; height: 100vh;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>
</div>
