<div class="container py-4">
  <%= link_to "retour", trip_flats_path(@trip) %>
	<h1><%= @flat.name %></h1>
	<p><%= @flat.address %></p>

  <div class="row">
    <div class="col-md-6">
      <%= image_tag 'photo.jpg', class:"w-100 h-100" %>
    </div>
    <div class="col-md-6">
      <div class="row row-cols-2 flex-wrap">
        <div class="col-md-6 p-1"><%= image_tag 'photo.jpg', class:"w-100 h-100" %></div>
        <div class="col-md-6 p-1"><%= image_tag 'photo.jpg', class:"w-100 h-100" %></div>
        <div class="col-md-6 p-1"><%= image_tag 'photo.jpg', class:"w-100 h-100" %></div>
        <div class="col-md-6 p-1"><%= image_tag 'photo.jpg', class:"w-100 h-100" %></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <!-- Flat card -->
      <div class="d-flex pt-4 pb-4 border-bottom">
        <div><%= image_tag "https://konsultan.online/wp-content/uploads/avatar-7.png", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %></div>
        <div class="pl-2"><p>Proposé par <%#= @flat.user.email.split("@").first %></p></div>
      </div>
      <div class="pt-4 pb-4 border-bottom">
        <p><%= @flat.description %></p>
        <%#= link_to "Retour aux hébergements", flats_path, class:"btn btn-secondary" %>
      </div>
    </div>
    <div class="col-md-4">
      <!-- Booking card -->
      <div id="form_booking">
        <div class="d-flex justify-content-between mt-2">
          <div class="important">
            <p><%= @flat.price %><span style="font-size: 16px">€/m²</span></p>
          </div>
        </div>
        <p><%= @flat.capacity %></p>
        <div>
          <%= simple_form_for [@flat, @booking_flat], url:  flat_flats_bookings_path(@flat) do |f| %>
              <%= f.input :trip_id, as: :hidden, input_html:{value:@trip.id} %>
              <%= f.input :start_date, :as => :date, :order => [:day, :month, :year] %> 
            <%= f.button :submit, "Réserver", class: "btn btn-primary w-100" %>
          <% end %>
        </div>
        <div class="d-flex justify-content-between mt-3 border-bottom">
        </div>

        <div class="important">
          <div class="d-flex justify-content-between mt-3">
            <p><strong>Total</strong></p>
            <%= @price %>
            <p><strong></strong></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <div class="pb-2"><h3>Emplacement</h3>
    <div id="map"
      style="width: 100%; height: 600px; border-radius: 10px;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>
